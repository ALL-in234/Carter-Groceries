<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ALL IN 應用程式</title>
  <script src="https://cdn.jsdelivr.net/npm/react@18.2.0/umd/react.development.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/react-dom@18.2.0/umd/react-dom.development.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@babel/standalone@7.22.5/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    .icon-hover:hover {
      color: #3b82f6;
      transform: scale(1.1);
      transition: all 0.2s ease;
    }
    .car-image {
      width: 100%;
      height: auto;
      object-fit: cover;
    }
    .price-button {
      background-color: #000;
      color: #8dffa0;
      padding: 10px 20px;
      border-radius: 10px;
      font-weight: bold;
    }
    .details-button {
      background-color: #2ED3C0;
      color: #000000;
      padding: 10px 20px;
      border-radius: 10px;
      font-weight: bold;
    }
    .pagination-button {
      background-color: #4b5563;
      color: white;
      padding: 8px 16px;
      border-radius: 5px;
      margin: 0 4px;
    }
    .pagination-button:hover {
      background-color: #6b7280;
    }
    .pagination-button.active {
      background-color: #3b82f6;
    }
    .action-button {
      background-color: #2ED3C0;
      color: #fff;
      padding: 10px 20px;
      border-radius: 10px;
      font-weight: bold;
      margin-right: 10px;
    }
    .email-button {
      background-color: #007BFF;
      color: #fff;
      padding: 10px 20px;
      border-radius: 10px;
      font-weight: bold;
    }
    .sell-box {
      border: 1px solid #000;
      padding: 20px;
      text-align: center;
      margin-bottom: 20px;
      background-color: #fff;
    }
    .start-button {
      background-color: #000;
      color: #2ED3C0;
      padding: 10px 20px;
      border-radius: 20px;
      font-weight: bold;
      margin-top: 10px;
    }

    /* 動畫 */
    @keyframes ping {
      75%, 100% { transform: scale(2); opacity: 0; }
    }
    .animate-ping { animation: ping 1.5s cubic-bezier(0, 0, 0.2, 1) infinite; }
    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-4px); }
    }
    .animate-bounce { animation: bounce 0.6s infinite; }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .animate-fadeIn { animation: fadeIn 0.6s ease-out; }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState } = React;

    // 主畫面
    const MainScreen = ({ onCarClick }) => (
      <div className="flex flex-col items-center h-screen bg-gray-100 p-4">
        <div className="flex justify-between w-full mb-4">
          <button className="text-2xl text-gray-600 icon-hover" aria-label="開啟選單">
            <i className="fas fa-bars"></i>
          </button>
          <h1 className="text-xl font-bold">Carter-Groceries</h1>
          <div className="w-8 h-8 bg-gray-300 rounded-full"></div>
        </div>
        <div className="grid grid-cols-2 gap-4 w-full mb-4">
          <button className="flex items-center justify-center bg-red-500 text-white font-bold py-4 rounded-lg hover:bg-red-600 transition-colors" aria-label="房屋選項">
            <i className="fas fa-home mr-2"></i> 房屋
          </button>
          <button
            onClick={onCarClick}
            className="flex items-center justify-center bg-teal-400 text-white font-bold py-4 rounded-lg hover:bg-teal-500 transition-colors"
            aria-label="汽車選項"
          >
            <i className="fas fa-car mr-2"></i> 汽車
          </button>
          <button className="flex items-center justify-center bg-purple-500 text-white font-bold py-4 rounded-lg hover:bg-purple-600 transition-colors" aria-label="股票選項">
            <i className="fas fa-chart-line mr-2"></i> 股票
          </button>
          <button className="flex items-center justify-center bg-green-500 text-white font-bold py-4 rounded-lg hover:bg-green-600 transition-colors" aria-label="加密貨幣選項">
            <i className="fas fa-coins mr-2"></i> 加密貨幣
          </button>
          <button className="flex items-center justify-center bg-cyan-500 text-white font-bold py-4 rounded-lg hover:bg-cyan-600 transition-colors" aria-label="服裝選項">
            <i className="fas fa-tshirt mr-2"></i> 服裝
          </button>
          <button className="flex items-center justify-center bg-yellow-200 text-black font-bold py-4 rounded-lg hover:bg-yellow-300 transition-colors" aria-label="寵物選項">
            <i className="fas fa-paw mr-2"></i> 寵物
          </button>
        </div>
      </div>
    );

    // 汽車列表頁面（含返回主畫面）
    const CarScreen = ({ onBackClick, onDetailsClick }) => {
      const [currentPage, setCurrentPage] = useState(1);
      const carsPerPage = 4;

      const cars = [
        { src: "image/car-benz.jpg", alt: "BMW Car", price: "HK $15000", details: { plate: "yyyyy", year: 2022, seats: 5, km: 18000 } },
        { src: "image/car-tesla.jpg", alt: "Tesla Car", price: "HK $10000", details: { plate: "xxxxx", year: 2023, seats: 4, km: 23000 } },
        { src: "image/ac2234_n.jpg", alt: "ac2234_n Car", price: "HK $12000", details: { plate: "zzzzz", year: 2021, seats: 4, km: 25000 } },
        { src: "image/zz1177.jpg", alt: "zz1177 Car", price: "HK $20000", details: { plate: "wwwww", year: 2020, seats: 6, km: 30000 } },
        { src: "image/ok1277.jpg", alt: "ok1277 Car", price: "HK $13000", details: { plate: "aaaaa", year: 2019, seats: 5, km: 22000 } },
      ];

      const indexOfLastCar = currentPage * carsPerPage;
      const indexOfFirstCar = indexOfLastCar - carsPerPage;
      const currentCars = cars.slice(indexOfFirstCar, indexOfLastCar);
      const totalPages = Math.ceil(cars.length / carsPerPage);

      return (
        <div className="flex flex-col items-center h-screen bg-white p-4">
          <div className="flex justify-between w-full mb-4">
            <button className="text-2xl text-gray-600 icon-hover" aria-label="開啟選單">
              <i className="fas fa-bars"></i>
            </button>
            <h1 className="text-xl font-bold">Carter-Groceries</h1>
            <button
              onClick={onBackClick}
              className="w-8 h-8 bg-teal-500 text-white rounded-full flex items-center justify-center shadow-md hover:bg-teal-600 hover:scale-110 transition-all duration-200"
              aria-label="返回主畫面"
            >
              <i className="fas fa-home"></i>
            </button>
          </div>
          <div className="sell-box w-full">
            <h2 className="text-lg font-semibold">開始售賣你的產品</h2>
            <button className="start-button mt-2">開始</button>
          </div>
          {currentCars.map((car, index) => (
            <div key={index} className="w-full mt-4">
              <div className="relative">
                <img
                  src={car.src}
                  alt={car.alt}
                  className="car-image rounded-lg shadow"
                  onError={(e) => { e.target.src = 'https://via.placeholder.com/300x200'; }}
                />
                <div className="flex justify-between items-center mt-2">
                  <button className="price-button">{car.price}</button>
                  <button className="details-button" onClick={() => onDetailsClick(car)}>
                    Details
                  </button>
                </div>
              </div>
            </div>
          ))}
          <div className="flex justify-center mt-4">
            {Array.from({ length: totalPages }, (_, i) => (
              <button
                key={i + 1}
                onClick={() => setCurrentPage(i + 1)}
                className={`pagination-button ${currentPage === i + 1 ? 'active' : ''}`}
              >
                {i + 1}
              </button>
            ))}
          </div>
        </div>
      );
    };

    // 汽車細節頁面（優化版）
    const CarDetailsScreen = ({ onBackClick, car, onPurchaseClick }) => (
      <div className="flex flex-col h-screen bg-gradient-to-b from-gray-50 to-white">
        <div className="flex justify-between items-center p-4 bg-white shadow-sm">
          <button className="text-2xl text-gray-600 icon-hover" aria-label="開啟選單">
            <i className="fas fa-bars"></i>
          </button>
          <h1 className="text-xl font-bold text-gray-800">Carter-Groceries</h1>
          {/* 返回主畫面按鈕 */}
        <button
          onClick={onBackClick}
          className="w-8 h-8 bg-teal-500 text-white rounded-full flex items-center justify-center shadow-md hover:bg-teal-600 hover:scale-110 transition-all duration-200"
          aria-label="返回主畫面"
          title="返回主畫面"
        >
          <i className="fas fa-home"></i>
        </button>
      </div>
        <div className="flex-1 overflow-y-auto pb-24 px-4">
          <div className="relative mt-4 mb-6 mx-auto max-w-sm">
            <img
              src={car.src}
              alt={car.alt}
              className="w-full h-56 object-cover rounded-2xl shadow-lg"
              onError={(e) => { e.target.src = 'https://via.placeholder.com/400x240/1a1a1a/ffffff?text=No+Image'; }}
            />
            <div className="absolute -bottom-4 left-4">
              <span className="price-button text-lg px-5 py-2">{car.price}</span>
            </div>
          </div>
          <div className="bg-white rounded-2xl shadow-md p-6 mx-2 mb-6 border border-gray-100">
            <h2 className="text-lg font-bold text-gray-800 mb-4 flex items-center">
              <i className="fas fa-info-circle mr-2 text-teal-500"></i>
              車輛規格
            </h2>
            <div className="space-y-3 text-gray-700">
              <div className="flex justify-between"><span className="font-medium">車牌號碼</span><span className="text-teal-600 font-semibold">{car.details.plate}</span></div>
              <div className="flex justify-between"><span className="font-medium">出廠年份</span><span>{car.details.year} 年</span></div>
              <div className="flex justify-between"><span className="font-medium">座位數</span><span>{car.details.seats} 座</span></div>
              <div className="flex justify-between"><span className="font-medium">行駛里程</span><span>{car.details.km.toLocaleString()} km</span></div>
            </div>
          </div>
          <div className="flex justify-center gap-4 px-4">
            <button className="action-button flex-1 max-w-xs">
              <i className="fas fa-comment-dots mr-2"></i>WTS
            </button>
            <button
              onClick={() => onPurchaseClick(car)}
              className="group relative overflow-hidden email-button flex-1 max-w-xs transform transition-all duration-300 hover:scale-105"
            >
              <span className="absolute inset-0 bg-white opacity-0 group-hover:opacity-30 animate-ping rounded-xl"></span>
              <span className="absolute inset-0 bg-gradient-to-r from-blue-400 to-blue-600 rounded-xl blur-lg scale-150 animate-pulse"></span>
              <span className="relative flex items-center justify-center font-bold text-white">
                <i className="fas fa-shopping-cart mr-2 animate-bounce"></i>Purchase
              </span>
            </button>
          </div>
        </div>
        <div className="fixed bottom-6 left-1/2 transform -translate-x-1/2">
          <button
            onClick={onBackClick}
            className="bg-teal-500 text-white text-lg w-12 h-12 rounded-full flex items-center justify-center shadow-xl hover:bg-teal-600 hover:scale-110 transition-all duration-200"
            aria-label="返回汽車列表"
          >
            <i className="fas fa-arrow-left"></i>
          </button>
        </div>
      </div>
    );

    // 購買頁面（含預約滾動選擇）
    const PurchaseScreen = ({ onBackClick, car, onPurchaseSuccess }) => {
      const [deliveryType, setDeliveryType] = useState('');
      const [selectedDate, setSelectedDate] = useState('');
      const [selectedTime, setSelectedTime] = useState('');
      const [address, setAddress] = useState('');
      const [paymentMethod, setPaymentMethod] = useState('');

      const timeOptions = [];
      for (let h = 9; h <= 21; h++) {
        timeOptions.push(`${h.toString().padStart(2, '0')}:00`);
        if (h < 21) timeOptions.push(`${h.toString().padStart(2, '0')}:30`);
      }

      const handlePurchase = () => {
        if (!deliveryType || !address || !paymentMethod) return alert('請填寫所有必填欄位！');
        if (deliveryType === '預約' && (!selectedDate || !selectedTime)) return alert('請選擇預約日期與時間！');

        const delivery = deliveryType === '即時' ? '即時' : `${selectedDate} ${selectedTime}`;
        onPurchaseSuccess({ car, price: car.price, delivery, address, payment: paymentMethod });
      };

      return (
        <div className="flex flex-col h-screen bg-gradient-to-b from-gray-50 to-white">
          <div className="flex justify-between items-center p-4 bg-white shadow-sm">
            <button className="text-2xl text-gray-600 icon-hover" aria-label="開啟選單">
              <i className="fas fa-bars"></i>
            </button>
            <h1 className="text-xl font-bold text-gray-800">Carter-Groceries</h1>
            {/* 返回主畫面按鈕 */}
        <button
          onClick={onBackClick}
          className="w-8 h-8 bg-teal-500 text-white rounded-full flex items-center justify-center shadow-md hover:bg-teal-600 hover:scale-110 transition-all duration-200"
          aria-label="返回主畫面"
          title="返回主畫面"
        >
          <i className="fas fa-home"></i>
        </button>
      </div>
          
          <div className="flex-1 overflow-y-auto px-4 pb-24">
            <div className="mt-4 mb-4">
              <img src={car.src} alt={car.alt} className="w-full h-48 object-cover rounded-xl shadow-md" />
              <div className="text-center mt-3">
                <span className="price-button inline-block text-lg px-6 py-2">{car.price}</span>
              </div>
            </div>
            <div className="mb-5">
              <label className="block text-lg font-bold text-gray-800 mb-3"><i className="fas fa-clock mr-2 text-teal-500"></i>送貨方式</label>
              <div className="grid grid-cols-2 gap-3">
                {['即時', '預約'].map(t => (
                  <button key={t} onClick={() => setDeliveryType(t)}
                    className={`py-3 rounded-xl font-semibold transition-all ${deliveryType === t ? 'bg-teal-500 text-white shadow-lg scale-105' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'}`}>
                    {t === '即時' ? '即時取貨' : '預約時間'}
                  </button>
                ))}
              </div>
            </div>
            {deliveryType === '預約' && (
              <div className="space-y-4 mb-5 p-4 bg-blue-50 rounded-xl border border-blue-200 animate-fadeIn">
                <div>
                  <label className="block text-sm font-semibold text-blue-700 mb-1">選擇日期</label>
                  <input type="date" value={selectedDate} onChange={e => setSelectedDate(e.target.value)}
                    min={new Date().toISOString().split('T')[0]}
                    className="w-full p-3 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-400" />
                </div>
                <div>
                  <label className="block text-sm font-semibold text-blue-700 mb-1">選擇時間</label>
                  <select value={selectedTime} onChange={e => setSelectedTime(e.target.value)}
                    className="w-full p-3 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-400">
                    <option value="">請選擇時間</option>
                    {timeOptions.map(t => <option key={t} value={t}>{t}</option>)}
                  </select>
                </div>
              </div>
            )}
            <div className="mb-5">
              <label className="block text-lg font-bold text-gray-800 mb-2"><i className="fas fa-map-marker-alt mr-2 text-red-500"></i>送貨地址</label>
              <input type="text" placeholder="請輸入詳細地址（必填）" value={address} onChange={e => setAddress(e.target.value)}
                className="w-full p-3 border rounded-lg focus:ring-2 focus:ring-teal-400" />
            </div>
            <div className="mb-6">
              <label className="block text-lg font-bold text-gray-800 mb-3"><i className="fas fa-credit-card mr-2 text-green-600"></i>支付方式</label>
              <div className="grid grid-cols-3 gap-2">
                {['現金', 'FPS', 'Alipay'].map(m => (
                  <button key={m} onClick={() => setPaymentMethod(m)}
                    className={`py-3 rounded-xl font-medium transition-all ${paymentMethod === m ? 'bg-gradient-to-r from-teal-500 to-teal-600 text-white shadow-md scale-105' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'}`}>
                    {m}
                  </button>
                ))}
              </div>
            </div>
            <button onClick={handlePurchase}
              className="w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white py-4 rounded-xl font-bold text-lg shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 flex items-center justify-center">
              <i className="fas fa-check-circle mr-2 animate-pulse"></i>確認購買
            </button>
          </div>
          <div className="fixed bottom-6 left-1/2 transform -translate-x-1/2">
            <button onClick={onBackClick}
              className="bg-teal-500 text-white text-lg w-12 h-12 rounded-full flex items-center justify-center shadow-xl hover:bg-teal-600 hover:scale-110 transition-all duration-200">
              <i className="fas fa-arrow-left"></i>
            </button>
          </div>
        </div>
      );
    };

    // 購買成功頁面（100% 還原截圖）
    const PurchaseSuccessScreen = ({ orderData, onBackToMain }) => {
      const { car, price, delivery, address, payment } = orderData;
      return (
        <div className="flex flex-col h-screen bg-white">
          <div className="flex justify-between items-center p-4 border-b">
            <button className="text-2xl text-gray-600 icon-hover" aria-label="選單">
              <i className="fas fa-bars"></i>
            </button>
            <h1 className="text-xl font-bold text-gray-800">Carter-Groceries</h1>
            <button onClick={onBackToMain}
              className="w-8 h-8 bg-teal-500 text-white rounded-full flex items-center justify-center shadow-md hover:bg-teal-600 hover:scale-110 transition-all">
              <i className="fas fa-home"></i>
            </button>
          </div>
          <div className="flex-1 overflow-y-auto px-6 pt-6 pb-24">
            <div className="text-center mb-6 animate-fadeIn">
              <h2 className="text-3xl font-bold text-gray-900">Purchased</h2>
              <p className="text-2xl font-bold text-gray-800 mt-1">購買成功</p>
            </div>
            <div className="mb-6">
              <img src={car.src} alt={car.alt}
                className="w-full h-48 object-cover rounded-2xl shadow-lg"
                onError={(e) => { e.target.src = 'https://via.placeholder.com/400x200'; }} />
            </div>
            <div className="mb-6">
              <p className="text-lg">
                <span className="text-gray-700">售價：</span>
                <span className="text-2xl font-bold text-teal-500 ml-2">{price}</span>
              </p>
            </div>
            <div className="space-y-4 text-lg text-gray-700">
              <p><span className="font-medium">送達時間：</span><span className="ml-2">{delivery}</span></p>
              <p><span className="font-medium">收貨地址：</span><span className="ml-2">{address}</span></p>
              <p><span className="font-medium">支付方式：</span><span className="ml-2">{payment}</span></p>
            </div>
            <div className="flex justify-center mt-8">
              <div className="w-20 h-20 bg-teal-100 rounded-full flex items-center justify-center animate-bounce">
                <i className="fas fa-check text-4xl text-teal-600"></i>
              </div>
            </div>
          </div>
        </div>
      );
    };

    // 主應用
    const App = () => {
      const [screen, setScreen] = useState('main');
      const [selectedCar, setSelectedCar] = useState(null);
      const [orderData, setOrderData] = useState(null);

      const go = (s) => setScreen(s);
      const backToMain = () => go('main');
      const toDetails = (car) => { setSelectedCar(car); go('details'); };
      const toPurchase = (car) => { setSelectedCar(car); go('purchase'); };
      const onPurchaseSuccess = (data) => { setOrderData(data); go('success'); };

      return (
        <div>
          {screen === 'main' && <MainScreen onCarClick={() => go('car')} />}
          {screen === 'car' && <CarScreen onBackClick={backToMain} onDetailsClick={toDetails} />}
          {screen === 'details' && <CarDetailsScreen onBackClick={() => go('car')} car={selectedCar} onPurchaseClick={toPurchase} />}
          {screen === 'purchase' && <PurchaseScreen onBackClick={() => go('details')} car={selectedCar} onPurchaseSuccess={onPurchaseSuccess} />}
          {screen === 'success' && <PurchaseSuccessScreen orderData={orderData} onBackToMain={backToMain} />}
        </div>
      );
    };

    ReactDOM.render(<App />, document.getElementById('root'));
  </script>
</body>
</html>
